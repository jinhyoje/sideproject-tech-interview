## 더티 체킹 (Dirty Checking)

- ### 트랜잭션 안에서 Entity의 변경이 일어났을 때 변경한 내용을 자동으로 DB에 반영하는 것

---

- ### 더티 체킹 과정
  -  JPA에서 Entity를 조회
  -  조회된 상태의 Entity에 대한 스냅샷 생성
  -  트랜잭션 커밋 후 해당 스냅샷과 현재 Entity 상태의 다른 점을 체크
  -  다른 점들을 update 쿼리로 데이터베이스에 전달

---

- ### 더티체킹의 대상
  - 이때 더티 체킹을 검사하는 대상은 영속성 컨텍스트가 관리하는 Entity로만 대상으로 한다.
  - 준영속, 비영속 Entity는 값을 변경할 지라도 데이터베이스에 반영시키지 않는다.

---
- ### 더티체킹의 주의점
  - 기본적으로 더티 체킹을 실행하면, SQL에서는 변경된 엔티티의 모든 내용을 update 쿼리로 만들어 전달하는데, <br>
    이때 필드가 많아지면 전체 필드를 update하는게 비효율적일 수도 있다.
  - 이때는 @DynamicUpdate를 해당 Entity에 선언하여 변경 필드만 반영시키도록 만들어줄 수 있다. 
